# 产品需求文档 (PRD) - 与高我对话平台

## 1. 产品概述

### 1.1 产品定位
一个基于AI的内在智慧探索平台，帮助用户通过深度对话实现自我成长和心智提升。

### 1.2 核心价值
- 提供个性化的内在导师体验
- 通过智能计费系统实现可持续运营
- 创造深邃灵性的用户体验

## 2. 用户体验设计

### 2.1 视觉风格 (重要更新)
- **主题**: 未来感炫酷夜晚星空风格
- **色彩**: 深邃的宇宙色调 (深蓝、紫色、星光白)
- **动效**: 星空闪烁、粒子效果、渐变动画
- **氛围**: 深邃灵性、科技感、神秘感

### 2.2 用户流程 (重要更新)
1. **正常进入**: 用户直接进入对话界面，无需先看付费页面
2. **免费体验**: 1元免费额度，用户无感知消费
3. **余额提醒**: 仅在余额不足时弹出充值界面
4. **无干扰体验**: 隐藏技术细节，专注对话体验

## 3. Token计费系统 (重要更新)

### 3.1 计费逻辑
- **免费额度**: 每用户1元免费试用
- **计费方式**: 按字符数计费 (每字符0.0001元)
- **费用范围**: 最小0.005元，最大0.5元/次
- **用户感知**: 隐藏具体额度数值，仅显示余额

### 3.2 套餐设计 (重要更新)
```
基础包: ¥9.9
- 描述: 约10,000字对话内容
- 实际: 成本¥7.62 + 30%利润

标准包: ¥19.9  
- 描述: 约20,000字对话内容
- 实际: 成本¥15.31 + 30%利润

高级包: ¥39.9
- 描述: 约40,000字对话内容  
- 实际: 成本¥30.69 + 30%利润
```

### 3.3 显示规则 (新增)
- ❌ 不显示: "获得¥X.XX对话额度"
- ❌ 不显示: "约X次对话" (无法准确计算)
- ✅ 显示: "约X,XXX字对话内容"
- ✅ 显示: 用户当前余额

## 4. 技术架构

### 4.1 AI模型配置 (需确认)
- **优先级1**: Vercel配置的大模型 (如果可用)
- **优先级2**: 用户提供的Gemini API Key
- **优先级3**: 演示模式 (模拟回复)

### 4.2 部署方案 (需确认)
- **目标**: Vercel部署
- **域名**: 需要配置自定义域名
- **环境变量**: 在Vercel后台配置

### 4.3 数据存储
- **用户数据**: Supabase
- **支付记录**: ZPay + Supabase
- **对话历史**: Supabase

## 5. 功能优先级

### 5.1 P0 (必须实现)
1. ✅ 星空主题UI设计
2. ✅ 正常对话流程 (免费进入)
3. ✅ 隐藏技术细节显示
4. ✅ 字数描述替换次数描述

### 5.2 P1 (重要)
1. 🔄 Vercel部署配置
2. 🔄 AI模型集成确认
3. 🔄 支付流程优化

### 5.3 P2 (优化)
1. 动画效果增强
2. 响应式优化
3. 性能优化

## 6. 待确认事项

### 6.1 技术配置
- [ ] 当前是否已部署到Vercel？
- [ ] Vercel是否有可用的大模型配置？
- [ ] 是否需要用户提供Gemini API Key？
- [ ] 当前AI回复是演示模式还是真实API？

### 6.2 用户配合
- [ ] 提供Vercel部署信息
- [ ] 确认AI模型偏好
- [ ] 确认支付方式配置

## 7. 实施计划

### Phase 1: UI重设计 (立即)
- 星空主题视觉设计
- 隐藏技术细节
- 字数描述更新

### Phase 2: 流程优化 (立即)  
- 正常进入流程
- 免费体验优化

### Phase 3: 技术确认 (需配合)
- Vercel部署状态
- AI模型配置
- 环境变量设置

### Phase 4: 最终优化
- 性能优化
- 用户体验完善